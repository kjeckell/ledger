<html>
    <head>
        
    </head>
    <body>
        <h1>All Players</h1>
        <table id="players" border=1>
            <thead>
                <th>email</th>
                <th>full name</th>
                <th>nickname</th>
            </thead>
        </table>

        <h1>New Players</h1>
        <form>
            <label for="email">Email</label>
            <input type="text" id="email" />

            <label for="fullName">Full Name</label>
            <input type="text" id="fullName" />

            <label for="nickName">Nick Name</label>
            <input type="text" id="nickName" />

            <button id="submitButton">Submit</button>
        </form>

        <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.1.0/jquery.min.js"></script>
        <script type="text/javascript">
            $(document).ready(function() {
                $.ajax({
                    type: "GET",
                    url: "https://jy49q24dg2.execute-api.us-east-1.amazonaws.com/dev/players",
                    dataType: "text json",
                    contentType: "application/json",
                    async: false,
                    
                    success: function(result,status,xhr) {
                        for (i = 0; i < result.players.length; i++) { 
                            tblDet = "<tr><td>" + result.players[i].email.S + "</td>"

                            if (result.players[i].fullName != undefined) {
                                tblDet = tblDet + "<td>" +  result.players[i].fullName.S + "</td>"
                            } else {
                                tblDet = tblDet + "<td></td>"
                            }

                            if (result.players[i].nickName != undefined) {
                                tblDet = tblDet + "<td>" +  result.players[i].nickName.S + "</td>"
                            } else {
                                tblDet = tblDet + "<td></td>"
                            }

                            $('#players').append(tblDet)
                        }
                    },

                    error: function(xhr,status,error) {
                        alert("Fail");
                    }
                });
            });

            $('#submitButton').on('click', function() {
                $.ajax({
                    type: "POST",
                    url: "https://jy49q24dg2.execute-api.us-east-1.amazonaws.com/dev/player",
                    dataType: "text json",
                    data: JSON.stringify({
                        "email": document.getElementById('email').value, 
                        "fullName": document.getElementById('fullName').value,
                        "nickName": document.getElementById('nickName').value
                    }),
                    contentType: "application/json",
                    async: false,
                    
                    success: function(result,status,xhr) {
                        alert(result.message)
                        location.reload();
                    },

                    error: function(xhr,status,error) {
                        alert("Failed")
                    }
                });

                return false
            });
        </script>
    </body>
</html>